Currently generates a type-annotated AST with some basic error checking.
